{"ast":null,"code":"import _objectSpread from\"C:/Users/Upgrade/react---/exam7/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Upgrade/react---/exam7/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import'../node_modules/bootstrap/dist/css/bootstrap.css';import'../src/components/Candidate/Candidate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setmessage=_useState4[1];// const history = useHistory();\nvar navigate=useNavigate();var handleChange=function handleChange(args){// debugger;\nvar copyOfCurrentUserInState=_objectSpread({},user);copyOfCurrentUserInState[args.target.name]=args.target.value;setUser(copyOfCurrentUserInState);};useEffect(function(){if(message!=\"\"){setTimeout(function(){setmessage(\"\");},2000);}},[message]);var signIn=function signIn(){var helper=new XMLHttpRequest();helper.onreadystatechange=function(){// console.log(user);\nif(helper.readyState==4&&helper.status==200){//  debugger;\n//  console.log(user);\nvar result=JSON.parse(helper.responseText);// get the token from resp body\nif(result){//Step 1: set the session state that says user is logged in now\nsessionStorage.setItem(\"isloggedin\",\"true\");sessionStorage.setItem(\"userName\",result.email);//  console.log(\"result obj\" + result)\nsessionStorage.setItem(\"Token\",result.name);// save token in session storage\nsessionStorage.setItem(\"id\",result.id);sessionStorage.setItem(\"user_type\",result.user_type_id.user_type);// props.afterlogin();\n//Step 2: navigate user to Home page..\n//  history.push(\"/candidate\");\n//  debugger;\n// console.log(\"This is Result    ++++++++====\"+result.user_type_id.id);\nconsole.log(\"This is Result    ++++++++====\"+result.email);if(result.user_type_id.user_type==\"1\"){navigate(\"/candidate\");}else if(result.user_type_id.user_type==\"2\"){navigate(\"/company\");}}else if(helper.readyState==4&&helper.status==404){// console.log(user);\nclearBoxes();setmessage(\"Invalid email or password!\");}}else{clearBoxes();setmessage(\"Invalid email or password!\");}};helper.open(\"POST\",\"http://localhost:8080/users/login\");helper.setRequestHeader(\"Content-Type\",\"application/json\");// debugger;\nvar cred={email:user.email,password:user.password};helper.send(JSON.stringify(cred));};var clearBoxes=function clearBoxes(){setUser({email:\"\",password:\"\"});};return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"div\",{id:\"b\",children:/*#__PURE__*/_jsxs(\"center\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:\"Email\"}),/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:user.email,onChange:handleChange})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:\"Password\"}),/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:user.password,onChange:handleChange})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:signIn,children:\"Log in\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:clearBoxes,children:\"Reset\"})})]})]})}),/*#__PURE__*/_jsx(\"h6\",{children:message}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Click Here to Register\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/rpwd/email\",children:\"Forget Password\"})]})}),\" \"]});}export default Login;","map":{"version":3,"names":["useState","useEffect","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_useState","email","password","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","message","setmessage","navigate","handleChange","args","copyOfCurrentUserInState","_objectSpread","target","name","value","setTimeout","signIn","helper","XMLHttpRequest","onreadystatechange","readyState","status","result","JSON","parse","responseText","sessionStorage","setItem","id","user_type_id","user_type","console","log","clearBoxes","open","setRequestHeader","cred","send","stringify","children","className","type","onChange","onClick","to"],"sources":["C:/Users/Upgrade/react---/exam7/src/Login.js"],"sourcesContent":["import { useState ,useEffect } from \"react\";\r\nimport { Link ,useNavigate} from \"react-router-dom\";\r\nimport '../node_modules/bootstrap/dist/css/bootstrap.css';\r\nimport '../src/components/Candidate/Candidate'\r\n\r\n\r\nfunction Login()\r\n{\r\n    const [user, setUser] = useState({email: \"\", password: \"\"});\r\n    const [message, setmessage] = useState(\"\");\r\n   // const history = useHistory();\r\n   var navigate = useNavigate();\r\n\r\n    const handleChange = (args)=>\r\n    {\r\n       // debugger;\r\n        var copyOfCurrentUserInState = {...user};\r\n        copyOfCurrentUserInState[args.target.name] = args.target.value;\r\n        setUser(copyOfCurrentUserInState);\r\n    }\r\n\r\n    \r\n    useEffect(()=>{\r\n        if(message!=\"\")\r\n        {\r\n            setTimeout(() => \r\n            {\r\n                setmessage(\"\");\r\n            }, 2000);\r\n        }\r\n    }, [message]);\r\n\r\n    const signIn = ()=>{\r\n        var helper = new XMLHttpRequest();\r\n        helper.onreadystatechange = ()=>{\r\n         // console.log(user);\r\n            if(helper.readyState == 4 && helper.status == 200)\r\n            {\r\n              //  debugger;\r\n            //  console.log(user);\r\n                var result = JSON.parse(helper.responseText); // get the token from resp body\r\n                if(result)\r\n                {\r\n                    //Step 1: set the session state that says user is logged in now\r\n                    sessionStorage.setItem(\"isloggedin\", \"true\")\r\n                    sessionStorage.setItem(\"userName\", result.email)\r\n                 //  console.log(\"result obj\" + result)\r\n                    sessionStorage.setItem(\"Token\", result.name) // save token in session storage\r\n                    sessionStorage.setItem(\"id\", result.id)\r\n                    sessionStorage.setItem(\"user_type\", result.user_type_id.user_type)\r\n\r\n                   // props.afterlogin();\r\n                    \r\n                    //Step 2: navigate user to Home page..\r\n                  //  history.push(\"/candidate\");\r\n                  //  debugger;\r\n                 // console.log(\"This is Result    ++++++++====\"+result.user_type_id.id);\r\n\r\n                  console.log(\"This is Result    ++++++++====\"+result.email);\r\n                  if(result.user_type_id.user_type==\"1\"){\r\n                    navigate(\"/candidate\");\r\n                  }\r\n                  else if(result.user_type_id.user_type== \"2\")\r\n                  {\r\n                    navigate(\"/company\");\r\n                  }\r\n                }\r\n                else if(helper.readyState == 4 && helper.status == 404)\r\n                {\r\n                 // console.log(user);\r\n                    clearBoxes();\r\n                    setmessage(\"Invalid email or password!\"); \r\n                }\r\n            }\r\n            else\r\n            {\r\n                clearBoxes();\r\n                setmessage(\"Invalid email or password!\"); \r\n            }\r\n        };\r\n\r\n        helper.open(\"POST\",\"http://localhost:8080/users/login\");\r\n        helper.setRequestHeader(\"Content-Type\", \"application/json\")\r\n       // debugger;\r\n        const cred = { email: user.email, password: user.password }\r\n\r\n        helper.send(JSON.stringify(cred))\r\n    }\r\n\r\n    const clearBoxes =()=>\r\n    {\r\n        setUser({email: \"\", password: \"\"});\r\n    }\r\n\r\n\r\n   \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return(\r\n        <> <div id=\"b\">\r\n                <center>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <table>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td className='td'>Email</td>    \r\n                                <td className='td'>\r\n                                    <input type=\"email\" name=\"email\"\r\n                                            value={user.email}\r\n                                            onChange={handleChange}/>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <td className='td'>Password</td>    \r\n                                <td className='td'>\r\n                                    <input type=\"password\" name=\"password\"\r\n                                            value={user.password}\r\n                                            onChange={handleChange}/>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td className='td'>\r\n                                    <button className='btn btn-primary'\r\n                                            onClick={signIn}>\r\n                                        Log in\r\n                                    </button>\r\n                                </td>\r\n                                <td className='td'>\r\n                                    <button className='btn btn-danger'\r\n                                            onClick={clearBoxes}>\r\n                                        Reset\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <h6>{message}</h6>\r\n\r\n                    <Link to={\"/register\"}>Click Here to Register</Link>\r\n                    <br></br>\r\n                    <Link to={\"/rpwd/email\"}>Forget Password</Link>\r\n                </center>\r\n            </div> </>)\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}