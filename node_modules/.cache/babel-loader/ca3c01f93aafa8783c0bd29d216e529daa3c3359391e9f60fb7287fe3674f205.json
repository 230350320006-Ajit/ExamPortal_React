{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Upgrade/react---/exam7/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Upgrade/react---/exam7/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Upgrade/react---/exam7/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{ChangePassword}from\"../../helpers/ResetPasswordHelper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EnterNewPassword(params){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newPassword=_useState2[0],setNewPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),confirmNewPassword=_useState4[0],setConfirmNewPassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cachedList=_useState6[0],setCachedList=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var location=useLocation();var navigate=useNavigate();useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var obj,Fetchdata,_Fetchdata;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_Fetchdata=function _Fetchdata3(){_Fetchdata=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8080/rpwd/\".concat(location.state.userid),{method:'GET'// or 'PUT'\n}).then(function(response){return response.json();}).then(function(data){//getting list of orevios 3 passwords\nconsole.log('Success:',data);obj=JSON.parse(data.data);//setting up cached List\nsetCachedList(obj);console.log(obj);}).catch(function(error){//otp is not valid send false\nconsole.error('Error:',error);});case 2:case\"end\":return _context.stop();}},_callee);}));return _Fetchdata.apply(this,arguments);};Fetchdata=function _Fetchdata2(){return _Fetchdata.apply(this,arguments);};Fetchdata();console.log(\"final obj:\"+obj);case 4:case\"end\":return _context2.stop();}},_callee2);})),[]);var submitData=function submitData(event){event.preventDefault();var isPrevious=false;if(newPassword!=confirmNewPassword){// show error np and cnp not matching\nsetError(\"Confirm password not matching!!!\");}else{cachedList.forEach(function(a){// cachedList of passwords\nconsole.log(a.pwd);if(a.pwd==newPassword){isPrevious=true;}});if(isPrevious){// show error previously used password\nsetError(\"Enter password which is not in list of previously used 3 passwords\");}else{setError(\"\");ChangePassword(location.state.userid,newPassword,navigate,setError);}}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"center\",{style:{alignItems:\"center\",verticalAlign:\"center\"},children:/*#__PURE__*/_jsx(\"form\",{onSubmit:submitData,className:\"col-md-4 col-sm-4\",style:{border:'solid 2px black',marginTop:\"10%\"},children:/*#__PURE__*/_jsxs(\"div\",{class:\"mb-3\",style:{margin:'10px'},children:[/*#__PURE__*/_jsx(\"label\",{for:\"nPwd\",className:\"form-label\",children:\"Enter New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"nPwd\",value:newPassword,onChange:function onChange(e){return setNewPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{for:\"cnPwd\",className:\"form-label\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"cnPwd\",value:confirmNewPassword,onChange:function onChange(e){return setConfirmNewPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"h3\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{marginTop:\"10px\"},children:\"Change Password\"})]})})})});}export default EnterNewPassword;","map":{"version":3,"names":["useEffect","useState","useLocation","useNavigate","ChangePassword","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EnterNewPassword","params","_useState","_useState2","_slicedToArray","newPassword","setNewPassword","_useState3","_useState4","confirmNewPassword","setConfirmNewPassword","_useState5","_useState6","cachedList","setCachedList","_useState7","_useState8","error","setError","location","navigate","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","obj","Fetchdata","_Fetchdata","wrap","_callee2$","_context2","prev","next","_Fetchdata3","_callee","_callee$","_context","fetch","concat","state","userid","method","then","response","json","data","console","log","JSON","parse","catch","stop","apply","arguments","_Fetchdata2","submitData","event","preventDefault","isPrevious","forEach","a","pwd","children","style","alignItems","verticalAlign","onSubmit","className","border","marginTop","class","margin","for","type","id","value","onChange","e","target","color"],"sources":["C:/Users/Upgrade/react---/exam7/src/components/resetpwd/EnterPwd.js"],"sourcesContent":["import { useEffect,useState } from \"react\";\r\nimport { useLocation,useNavigate } from \"react-router-dom\";\r\nimport { ChangePassword } from \"../../helpers/ResetPasswordHelper\"\r\n\r\nfunction EnterNewPassword(params) {\r\n    const[newPassword,setNewPassword] = useState(\"\");\r\n    const[confirmNewPassword,setConfirmNewPassword] = useState(\"\");\r\n    const[cachedList,setCachedList] = useState([]);\r\n    const[error,setError] = useState(\"\");\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    \r\n\r\n    useEffect(async ()=>{\r\n        var obj;\r\n        async function Fetchdata() {\r\n            //caching last 3 passwords\r\n        await fetch(`http://localhost:8080/rpwd/${location.state.userid}`, {\r\n            method: 'GET', // or 'PUT'\r\n            })\r\n              .then((response) => response.json())\r\n              .then((data) => {\r\n                //getting list of orevios 3 passwords\r\n                console.log('Success:', data);\r\n                obj = JSON.parse(data.data)\r\n                //setting up cached List\r\n                setCachedList(obj);\r\n                console.log(obj)\r\n              })\r\n              .catch((error) => {\r\n                //otp is not valid send false\r\n                console.error('Error:', error);\r\n          });\r\n        }\r\n        Fetchdata()\r\n        console.log(\"final obj:\" + obj)\r\n\r\n    },[])\r\n\r\n    const submitData = (event) => {\r\n        event.preventDefault();\r\n        var isPrevious = false;\r\n\r\n        if(newPassword != confirmNewPassword){\r\n            // show error np and cnp not matching\r\n            setError(\"Confirm password not matching!!!\")\r\n        }else{\r\n            cachedList.forEach((a)=>{\r\n                // cachedList of passwords\r\n                console.log(a.pwd)\r\n                if(a.pwd == newPassword){\r\n                    isPrevious = true;\r\n                }\r\n            })\r\n\r\n            if(isPrevious){\r\n                    // show error previously used password\r\n                    setError(\"Enter password which is not in list of previously used 3 passwords\")\r\n            }else{\r\n                setError(\"\")\r\n                ChangePassword(location.state.userid,newPassword,navigate,setError)\r\n            }          \r\n\r\n        }   \r\n    }\r\n\r\n    return (<>\r\n    <center style={{alignItems:\"center\",verticalAlign:\"center\"}}>\r\n        <form onSubmit={submitData} className=\"col-md-4 col-sm-4\" style={{border:'solid 2px black',marginTop:\"10%\"}}>\r\n        <div class=\"mb-3\" style={{margin:'10px'}}>\r\n            <label for=\"nPwd\" className=\"form-label\">Enter New Password</label>\r\n            <input type=\"password\" className=\"form-control\"  id=\"nPwd\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)}/>\r\n            <label for=\"cnPwd\" className=\"form-label\">Confirm New Password</label>\r\n            <input type=\"password\" className=\"form-control\"  id=\"cnPwd\" value={confirmNewPassword} onChange={(e) => setConfirmNewPassword(e.target.value)}/>\r\n            <h3 style={{color:\"red\"}}>{error}</h3>\r\n            <button type=\"submit\" className=\"btn btn-primary\" style={{marginTop:\"10px\"}}>Change Password</button>\r\n        </div>\r\n        </form>\r\n    </center>\r\n    </>);\r\n\r\n}\r\n\r\nexport default EnterNewPassword;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}